mongo:
  image: mongo:3.2
  container_name: vegas-cmf-media-mongo
  command: mongod --smallfiles
  expose:
    - 27017
    - 28017
  environment:
    - AUTH=no
    - TERM=xterm-256color

mysql:
  image: mysql:5.7
  container_name: vegas-cmf-media-mysql
  expose:
    - 3306
  environment:
    - MYSQL_ALLOW_EMPTY_PASSWORD=yes
    - MYSQL_ROOT_PASSWORD
    - MYSQL_USER=root
    - MYSQL_PASSWORD
    - MYSQL_DATABASE=vegas_test

phpunit:
  build: .
  container_name: vegas-cmf-media-phpunit
  command: vendor/bin/phpunit
  environment:
    - TERM=xterm-256color
    - MONGO_DB_NAME=vegas_test
  links:
    - mongo:vegas-cmf-media-mongo
    - mysql:vegas-cmf-media-mysql
  volumes:
    - ./:/opt